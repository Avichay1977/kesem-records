---
import Base from '../layouts/Base.astro';
import Icon from '../components/Icon.astro';
import collaborationsData from '../data/collaborations.json';
import duo from '../data/duo.json';
import featuredData from '../data/featured.json';
import albumsData from '../data/albums.json';
import remixesData from '../data/remixes.json';
import scoringData from '../data/scoring.json';
import settings from '../data/settings.json';

const collaborations = collaborationsData.items;
const featured = featuredData.items;
const albums = albumsData.items;
const remixes = remixesData.items;
const scoring = scoringData.items;
---

<Base title="Music | Kesem Records">
  <section class="music">
    <h1>Music</h1>
    <div class="divider"></div>

    <!-- Israeli Music -->
    <div class="section">
      <h2>Israeli Music</h2>

      {collaborations.map((c) => (
        <div class="line">
          <span class="line-title">
            {c.artist}
            <a href={`https://www.youtube.com/watch?v=${c.youtubeId}`} target="_blank" rel="noopener noreferrer" class="yt">&#9654;</a>
          </span>
          <span class="line-sub">{c.work}</span>
          <span class="line-role">{c.role}</span>
        </div>
      ))}

      <div class="line line-duo">
        <span class="line-title">
          {duo.artist}
          <a href={`https://www.youtube.com/watch?v=${duo.tracks[0].youtubeId}`} target="_blank" rel="noopener noreferrer" class="yt">&#9654;</a>
        </span>
        <span class="line-label">{duo.label}</span>
        <div class="duo-tracks">
          {duo.tracks.map((t, i) => (
            <>
              <a href={`https://www.youtube.com/watch?v=${t.youtubeId}`} target="_blank" rel="noopener noreferrer">{t.name}</a>
              {i < duo.tracks.length - 1 && <span class="sep">&middot;</span>}
            </>
          ))}
        </div>
      </div>
    </div>

    <!-- International -->
    <div class="section">
      <h2>International</h2>

      {featured.map((t) => (
        <div class="line">
          <span class="line-title">
            {t.title}
            <a href={`https://www.youtube.com/watch?v=${t.youtubeId}`} target="_blank" rel="noopener noreferrer" class="yt">&#9654;</a>
          </span>
          <span class="line-sub">{t.note}</span>
        </div>
      ))}
    </div>

    <!-- Instrumental -->
    <div class="section">
      <h2>Instrumental</h2>
      <p class="section-note">
        13 albums on
        <a href="https://artlist.io/royalty-free-music/artist/dogbeat/1570" target="_blank" rel="noopener noreferrer">Artlist</a>
        &mdash; licensing worldwide.
      </p>

      <div class="albums">
        {albums.map((a) => (
          <div class="album">
            {a.youtubeList ? (
              <a href={`https://www.youtube.com/playlist?list=${a.youtubeList}`} target="_blank" rel="noopener noreferrer" class="album-name">{a.title}</a>
            ) : (
              <span class="album-name">{a.title}</span>
            )}
            <span class="album-style">{a.style}</span>
          </div>
        ))}
      </div>
    </div>

    <!-- Remixes -->
    <div class="section">
      <h2>Remixes</h2>

      {remixes.map((r) => (
        <div class="line">
          <span class="line-title">
            {r.title}
            <a href={`https://www.youtube.com/watch?v=${r.youtubeId}`} target="_blank" rel="noopener noreferrer" class="yt">&#9654;</a>
          </span>
          <span class="line-sub">with {r.with}</span>
        </div>
      ))}
    </div>

    <!-- Film, TV & Theater -->
    <div class="section">
      <h2>Film, TV & Theater</h2>

      {scoring.map((s) => (
        <div class="line">
          <span class="line-title">
            {s.title}
            {s.link && <a href={s.link} target="_blank" rel="noopener noreferrer" class="yt">&#9654;</a>}
          </span>
          <span class="line-sub">{s.type}{s.with ? ` \u00b7 ${s.with}` : ''}{s.year ? ` \u00b7 ${s.year}` : ''}</span>
        </div>
      ))}
    </div>

    <!-- Listen -->
    <div class="section listen">
      <h2>Listen</h2>
      <div class="icon-links">
        {settings.social.filter(s => ['spotify', 'youtube', 'soundcloud', 'artlist'].includes(s.name)).map((s) => (
          <a href={s.url} target="_blank" rel="noopener noreferrer" title={s.title}><Icon name={s.name} /></a>
        ))}
      </div>
    </div>
  </section>
</Base>

<style>
  .music h1 {
    font-size: 2rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
  }

  .divider {
    width: 60px;
    height: 1px;
    background: var(--border);
    margin: 2rem 0;
  }

  .section {
    margin-bottom: 4rem;
  }

  .section h2 {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--accent);
    margin-bottom: 2rem;
  }

  .section-note {
    font-size: 0.85rem;
    color: var(--accent);
    margin-top: -1rem;
    margin-bottom: 2rem;
  }

  .section-note a {
    color: var(--fg);
  }

  .line {
    padding: 0.9rem 0;
    border-bottom: 1px solid var(--border);
  }

  .line:first-of-type {
    padding-top: 0;
  }

  .line-title {
    display: block;
    font-size: 0.95rem;
    letter-spacing: 0.02em;
    color: var(--fg);
  }

  a.line-title { text-decoration: none; }
  a.line-title:hover { opacity: 0.7; }

  .yt {
    font-size: 0.55rem;
    color: var(--accent);
    text-decoration: none;
    margin-left: 0.5rem;
    opacity: 0.4;
    transition: opacity 0.2s;
  }

  .yt:hover { opacity: 1; }

  .line-sub {
    display: block;
    font-size: 0.75rem;
    color: var(--accent);
    margin-top: 0.2rem;
    letter-spacing: 0.03em;
  }

  .line-role {
    display: block;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    margin-top: 0.15rem;
    opacity: 0.7;
  }

  .line-duo { padding: 1.2rem 0; }

  .line-label {
    display: block;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    margin-top: 0.15rem;
    opacity: 0.7;
  }

  .duo-tracks {
    margin-top: 0.6rem;
    font-size: 0.85rem;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.4rem;
  }

  .duo-tracks a { color: var(--fg); }
  .duo-tracks a:hover { opacity: 0.7; }

  .sep {
    color: var(--accent);
    font-size: 0.7rem;
  }

  .albums {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
  }

  .album {
    padding: 0.8rem 0;
    border-bottom: 1px solid var(--border);
  }

  .album:nth-child(odd) { padding-right: 1.5rem; }

  .album:nth-child(even) {
    padding-left: 1.5rem;
    border-left: 1px solid var(--border);
  }

  .album-name {
    display: block;
    font-size: 0.9rem;
    letter-spacing: 0.02em;
  }

  a.album-name { color: var(--fg); text-decoration: none; }
  a.album-name:hover { opacity: 0.7; }

  .album-style {
    display: block;
    font-size: 0.7rem;
    color: var(--accent);
    margin-top: 0.15rem;
    letter-spacing: 0.03em;
  }

  .listen { padding-top: 1rem; }

  .icon-links {
    display: flex;
    gap: 1.8rem;
    align-items: center;
  }

  .icon-links a {
    color: var(--fg);
    opacity: 0.5;
    transition: opacity 0.2s;
  }

  .icon-links a:hover { opacity: 1; }

  @media (max-width: 480px) {
    .albums { grid-template-columns: 1fr; }
    .album:nth-child(even) { padding-left: 0; border-left: none; }
    .album:nth-child(odd) { padding-right: 0; }
  }
</style>
